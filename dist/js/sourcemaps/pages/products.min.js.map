{"version":3,"sources":["pages/products.js"],"names":["$","document","ready","display","page","products","load","toggleLoadingScreen","etsyDB","getAll","drawProducts","all_products","appendString","each","key","product_data","product","allProductTemplate","removeClass","product_url","find","attr","listing_id","title","html","bin_id","bin_name","price","moment","created","format","original_creation","all_product_actions","all-product-id","id","toString","all-product-title","all-product-bin-id","productTableBody","getElementById","innerHTML","drawBinList","bins","currentBin","val","name","total","allProductBinList","updateProductBin","product_id","product_row","removeProduct","fadeOut","this","remove","clone","on","addClass","openModal","setBin","closeModal"],"mappings":"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","file":"pages/products.min.js","sourcesContent":["$(document).ready(function() {\n    $.display.page.products = {\n        load: function() {\n            $.display.toggleLoadingScreen($.etsyDB.products.getAll($.display.page.products.drawProducts));\n        },\n\n        // Draw products table\n        drawProducts: function(all_products) {\n            var appendString = '';\n\n            $.each(all_products, function(key, product_data) {\n                var product = allProductTemplate;\n                product.removeClass('template');\n\n                var product_url = product.find('.listing-url');\n                product_url.attr('href', 'http://www.etsy.com/listing/' + product_data.listing_id);\n                product_url.attr('title', product_data.title);\n                product_url.html(product_data.title);\n\n                if (product_data.bin_id == -1) {\n                    product.find('.bin-id').html('-1');\n                    product.find('.bin-name').html('<i class=\"mdi-content-clear\"></i>');\n                }\n                else {\n                    product.find('.bin-id').html(product_data.bin_id);\n                    product.find('.bin-name').html(product_data.bin_name);\n                }\n\n                product.find('.price').html(product_data.price);\n                product.find('.created').html(moment(product_data.created).format('MMM D, h:mm a'));\n                product.find('.original-created').html(moment(product_data.original_creation).format('MMM D, h:mm a'));\n\n                var all_product_actions = product.find('.all-product-actions');\n                all_product_actions.find('.btn-floating').attr({\n                    \"all-product-id\": product_data.id.toString(),\n                    \"all-product-title\": product_data.title,\n                    \"all-product-bin-id\": product_data.bin_id\n                });\n\n                appendString += ('<tr id=\"all-product-row-' + product_data.id + '\">' + product.html() + '</tr>');\n            });\n\n            // Try and cut some repaint time by using vanilla JS\n            var productTableBody = document.getElementById('productTableBody');\n            productTableBody.innerHTML = appendString;\n        },\n\n        // Draw product bin select list\n        drawBinList: function(bins) {\n            var appendString = '';\n            var currentBin = $('#allProductsBinID').html();\n            $.each(bins, function(key, val) {\n                if (currentBin == val.id) {\n                    appendString += '<a href=\"#!\" class=\"collection-item all-product-bin-list-item active\" all-product-bin-id=\"' + val.id + '\">';\n                } else {\n                    appendString += '<a href=\"#!\" class=\"collection-item all-product-bin-list-item\" all-product-bin-id=\"' + val.id + '\">';\n                }\n                appendString += val.name + ' (' + val.total + ' Products)</a>';\n            });\n\n            // Try and cut some repaint time by using vanilla JS\n            var allProductBinList = document.getElementById('allProductBinList');\n            allProductBinList.innerHTML = appendString;\n        },\n\n        // Update product bin display\n        updateProductBin: function(product_id, bin_id, bin_name) {\n            var product_row = $('#all-product-row-' + product_id);\n            product_row.find('.bin-name').html(bin_name);\n            product_row.find('.bin-id').html(bin_id);\n            product_row.find('.all-product-actions').find('.btn-floating').attr({\n                \"all-product-bin-id\": bin_id\n            });\n        },\n\n        // Remove product row\n        removeProduct: function(product_id) {\n            $('#all-product-row-' + product_id).fadeOut('slow', function() {\n                $(this).remove();\n            });\n        },\n    };\n\n    var allProductTemplate = $('#allProductTemplate').clone();\n    $('#allProductTemplate').remove();\n\n    var allProductBinTemplate = $('#allProductBinTemplate');\n    $('#allProductBinTemplate').remove();\n\n    // Mark product as sold\n    $('body').on('click', '.btn-new-product-sold', function() {\n        // TODO: Open the dialog here\n    });\n\n    // Mark product bin list item active\n    $('body').on('click', '.all-product-bin-list-item', function() {\n        $('.all-product-bin-list-item').removeClass('active');\n        $(this).addClass('active');\n    });\n\n    // Reload products\n    $('#reloadProducts').on('click', function() {\n        $.display.page.products.load();\n    });\n\n    // Open product bin modal\n    $('body').on('click', '.btn-all-product-change-bin', function() {\n        $('#allProductBinList').attr('all-product-id', $(this).attr('all-product-id'));\n        $('#allProductBinTitle').html($(this).attr('all-product-title'));\n\n        var bin_id = $('#all-product-row-' + $(this).attr('all-product-id')).find('.bin-id').html();\n        $('#allProductsBinID').html(bin_id);\n\n        if (bin_id == -1) $('#allProductBinName').html('None');\n        else {\n            var bin_name = $('#all-product-row-' + $(this).attr('all-product-id')).find('.bin-name').html();\n            $('#allProductBinName').html(bin_name);\n        }\n\n        $.etsyDB.bins.getAll($.display.page.products.drawBinList);\n        $('#modalAllProductBin').openModal();\n    });\n\n    // Update product bin\n    $('#updateAllProductBin').on('click', function() {\n        var product_id = $('#allProductBinList').attr('all-product-id'),\n            bin_id =  $('#allProductBinList .active').attr('all-product-bin-id');\n        $.etsyDB.products.setBin(product_id, bin_id, $.display.page.products.updateProductBin);\n        $('#modalAllProductBin').closeModal();\n    });\n});"],"sourceRoot":"/source/"}