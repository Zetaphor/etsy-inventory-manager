{"version":3,"sources":["lib/etsy_api.js"],"names":["$","document","ready","etsyAPI","apiURL","apiKey","recentResultsLimit","resultLimit","listingParams","fields","buildURL","resource","offset","limit","requestURL","paramString","each","key","val","toString","getListings","callback","etsyApp","settings","shopName","ajax","url","dataType","success","data","ok","count","console","log","error"],"mappings":"AAAAA,EAAEC,UAAUC,MAAM,WACdF,EAAEG,SACEC,OAAQ,+BACRC,OAAQ,2BACRC,mBAAoB,GACpBC,YAAa,IACbC,eACIC,QACI,aACA,QACA,gBACA,cACA,QACA,WACA,QACA,QACA,cACA,eACA,0BAKRC,SAAU,SAASC,EAAUC,EAAQC,GACjCA,EAAyB,mBAAVA,GAAwBA,EAAQb,EAAEG,QAAQI,YACzDK,EAA2B,mBAAXA,GAAyBA,EAAS,CAClD,IAAIE,GAAad,EAAEG,QAAQC,OAASO,EAAW,YAAcX,EAAEG,QAAQE,OAAS,WAAkBO,EAAS,UAAiBC,EAAQ,IAChIE,EAAc,EAIlB,OAHAf,GAAEgB,KAAKhB,EAAEG,QAAQK,cAAe,SAASS,EAAKC,GAC1CH,GAAeE,EAAM,IAAMC,EAAIC,WAAa,MAEzCL,EAAaC,GAGxBK,YAAa,SAASC,EAAUT,EAAQC,GACpCD,EAA2B,mBAAXA,GAAyBA,EAAS,EAClDC,EAAyB,mBAAVA,GAAwBA,EAAQb,EAAEG,QAAQI,WACzD,IAAIO,GAAad,EAAEG,QAAQO,SAAS,SAAWV,EAAEsB,QAAQC,SAASC,SAAW,sBAAuBZ,EAAQC,EAC5Gb,GAAEyB,MACEC,IAAKZ,EACLa,SAAU,QACVC,QAAS,SAASC,GACVA,EAAKC,GACeT,EAAhBQ,EAAKE,MAAQ,EAAYF,OAG7BG,QAAQC,IAAI,cAAgBJ,EAAKK,OACjCb","file":"lib/etsy_api.min.js","sourcesContent":["$(document).ready(function() {\n    $.etsyAPI = {\n        apiURL: \"https://openapi.etsy.com/v2/\",\n        apiKey: \"tpgge44ziiwldztbd8hx7b1r\",\n        recentResultsLimit: 20,\n        resultLimit: 100,\n        listingParams: {\n            fields: [\n                'listing_id',\n                'title',\n                'category_path',\n                'category_id',\n                'price',\n                'quantity',\n                'style',\n                'state',\n                'taxonomy_id',\n                'creation_tsz',\n                'original_creation_tsz'\n            ]\n        },\n\n        // https://www.etsy.com/developers/documentation/reference/listing#method_getlisting\n        buildURL: function(resource, offset, limit) {\n            limit = typeof limit !== 'undefined' ? limit : $.etsyAPI.resultLimit;\n            offset = typeof offset !== 'undefined' ? offset : 0;\n            var requestURL = $.etsyAPI.apiURL + resource + '?api_key=' + $.etsyAPI.apiKey + '&' + 'offset=' + offset + '&' + 'limit=' + limit + '&';\n            var paramString = '';\n            $.each($.etsyAPI.listingParams, function(key, val) {\n                paramString += key + '=' + val.toString() + '&';\n            });\n            return requestURL + paramString;\n        },\n\n        getListings: function(callback, offset, limit) {\n            offset = typeof offset !== 'undefined' ? offset : 0;\n            limit = typeof limit !== 'undefined' ? limit : $.etsyAPI.resultLimit;\n            var requestURL = $.etsyAPI.buildURL('shops/' + $.etsyApp.settings.shopName + '/listings/active.js', offset, limit);\n            $.ajax({\n                url: requestURL,\n                dataType: 'jsonp',\n                success: function(data) {\n                    if (data.ok) {\n                        if (data.count > 0) callback(data);\n                        else callback([]);\n                    } else {\n                        console.log(\"API Error: \" + data.error);\n                        callback([]);\n                    }\n                }\n            });\n        }\n    };\n});\n"],"sourceRoot":"/source/"}