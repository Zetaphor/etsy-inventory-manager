{"version":3,"sources":["app.js"],"names":["$","document","ready","etsyApp","defaultSettings","lastRefresh","firstRun","shopName","updateOnStartEnabled","updateOnStartType","autoUpdateEnabled","autoUpdateType","autoUpdateInterval","autoUpdateMinInterval","settings","inventoryCounts","newProducts","totalBins","totalProducts","setAutoUpdateTimer","clearInterval","autoUpdateTimer","setInterval","etsyAPIHelper","getRecentListings","getAllListings","removeAutoUpdateTimer","loadSettings","localStorage","getItem","saveSettings","JSON","parse","display","updateLastUpdateText","setItem","stringify","appFirstRun","console","log","appStart","page","dashboard","load","prop","val","attr","etsyDB","init","window","unload","db","on"],"mappings":"AAAAA,EAAEC,UAAUC,MAAM,WACdF,EAAEG,SACEC,iBACIC,YAAa,QACbC,UAAU,EACVC,SAAU,sBACVC,sBAAsB,EACtBC,kBAAmB,MACnBC,mBAAmB,EACnBC,eAAgB,SAChBC,mBAAoB,GACpBC,sBAAuB,IAG3BC,UACIT,YAAa,QACbC,UAAU,EACVC,SAAU,sBACVC,sBAAsB,EACtBC,kBAAmB,MACnBC,mBAAmB,EACnBC,eAAgB,SAChBC,mBAAoB,GACpBC,sBAAuB,IAG3BE,iBACIC,YAAa,EACbC,UAAW,EACXC,cAAe,GAGnBC,mBAAoB,WAChBC,cAAcpB,EAAEG,QAAQW,SAASO,iBAEQ,UAArCrB,EAAEG,QAAQW,SAASH,eACnBX,EAAEG,QAAQkB,gBAAkBC,YAAYtB,EAAEuB,cAAcC,kBAA4D,IAAxCxB,EAAEG,QAAQW,SAASF,oBACnD,OAArCZ,EAAEG,QAAQW,SAASH,iBAC1BX,EAAEG,QAAQkB,gBAAkBC,YAAYtB,EAAEuB,cAAcE,eAAyD,IAAxCzB,EAAEG,QAAQW,SAASF,sBAIpGc,sBAAuB,WACnBN,cAAcpB,EAAEG,QAAQW,SAASO,kBAGrCM,aAAc,WAC+B,OAArCC,aAAaC,QAAQ,aACrB7B,EAAEG,QAAQW,SAAWd,EAAEG,QAAQC,gBAC/BJ,EAAEG,QAAQ2B,gBAEV9B,EAAEG,QAAQW,SAAWiB,KAAKC,MAAMJ,aAAaC,QAAQ,aAGzD7B,EAAEiC,QAAQC,qBAAqBlC,EAAEG,QAAQW,SAAST,cAGtDyB,aAAc,WACVF,aAAaO,QAAQ,WAAYJ,KAAKK,UAAUpC,EAAEG,QAAQW,YAG9DuB,YAAa,WACTC,QAAQC,IAAI,+BAGhBC,SAAU,WACNxC,EAAEiC,QAAQQ,KAAKC,UAAUC,OACrB3C,EAAEG,QAAQW,SAASR,WACnBN,EAAEG,QAAQW,SAASR,UAAW,EAC9BN,EAAEG,QAAQ2B,eACV9B,EAAEG,QAAQkC,eAGVrC,EAAEG,QAAQW,SAASN,uBACyB,UAAxCR,EAAEG,QAAQW,SAASL,mBACnBT,EAAE,sBAAsB4C,KAAK,WAAW,GACxC5C,EAAEuB,cAAcC,qBAC+B,OAAxCxB,EAAEG,QAAQW,SAASL,oBAC1BT,EAAE,mBAAmB4C,KAAK,WAAW,GACrC5C,EAAEuB,cAAcE,kBAEpBzB,EAAE,yBAAyB4C,KAAK,WAAW,GAC3C5C,EAAE,iBAAiB4C,KAAK,YAAY,IAGxC5C,EAAE,uBAAuB6C,IAAI7C,EAAEG,QAAQW,SAASF,oBAC5CZ,EAAEG,QAAQW,SAASJ,oBACnBV,EAAE,wBAAwB4C,KAAK,WAAW,GACD,UAArC5C,EAAEG,QAAQW,SAASH,eACnBX,EAAE,qBAAqB4C,KAAK,WAAW,GAEvC5C,EAAE,kBAAkB4C,KAAK,WAAW,GAExC5C,EAAE,gBAAgB4C,KAAK,YAAY,MAe/C5C,EAAE,uBAAuB8C,KAAK,MAAO9C,EAAEG,QAAQW,SAASD,uBAExDb,EAAEG,QAAQwB,eACV3B,EAAE+C,OAAOC,OAGThD,EAAEiD,QAAQC,OAAO,WACblD,EAAEG,QAAQ2B,iBAGd9B,EAAEmD,GAAGC,GAAG,QAAS,WACbpD,EAAEG,QAAQqC","file":"app.min.js","sourcesContent":["$(document).ready(function() {\n    $.etsyApp = {\n        defaultSettings: {\n            lastRefresh: 'Never',\n            firstRun: true,\n            shopName: 'JessicaAnnsEmporium',\n            updateOnStartEnabled: false,\n            updateOnStartType: 'all',\n            autoUpdateEnabled: false,\n            autoUpdateType: 'recent',\n            autoUpdateInterval: 10,\n            autoUpdateMinInterval: 10\n        },\n\n        settings: {\n            lastRefresh: 'Never',\n            firstRun: true,\n            shopName: 'JessicaAnnsEmporium',\n            updateOnStartEnabled: false,\n            updateOnStartType: 'all',\n            autoUpdateEnabled: false,\n            autoUpdateType: 'recent',\n            autoUpdateInterval: 10,\n            autoUpdateMinInterval: 10\n        },\n\n        inventoryCounts: {\n            newProducts: 0,\n            totalBins: 0,\n            totalProducts: 0\n        },\n\n        setAutoUpdateTimer: function() {\n            clearInterval($.etsyApp.settings.autoUpdateTimer);\n\n            if ($.etsyApp.settings.autoUpdateType == 'recent') {\n                $.etsyApp.autoUpdateTimer = setInterval($.etsyAPIHelper.getRecentListings, ($.etsyApp.settings.autoUpdateInterval * 60000));\n            } else if ($.etsyApp.settings.autoUpdateType == 'all') {\n                $.etsyApp.autoUpdateTimer = setInterval($.etsyAPIHelper.getAllListings, ($.etsyApp.settings.autoUpdateInterval * 60000));\n            }\n        },\n\n        removeAutoUpdateTimer: function() {\n            clearInterval($.etsyApp.settings.autoUpdateTimer);\n        },\n\n        loadSettings: function() {\n            if (localStorage.getItem('settings') === null) {\n                $.etsyApp.settings = $.etsyApp.defaultSettings;\n                $.etsyApp.saveSettings();\n            } else {\n                $.etsyApp.settings = JSON.parse(localStorage.getItem('settings'));\n            }\n\n            $.display.updateLastUpdateText($.etsyApp.settings.lastRefresh);\n        },\n\n        saveSettings: function() {\n            localStorage.setItem('settings', JSON.stringify($.etsyApp.settings));\n        },\n\n        appFirstRun: function() {\n            console.log('Welcome to the first time!');\n        },\n\n        appStart: function() {\n            $.display.page.dashboard.load();\n            if ($.etsyApp.settings.firstRun) {\n                $.etsyApp.settings.firstRun = false;\n                $.etsyApp.saveSettings();\n                $.etsyApp.appFirstRun();\n            }\n\n            if ($.etsyApp.settings.updateOnStartEnabled) {\n                if ($.etsyApp.settings.updateOnStartType == 'recent') {\n                    $('#startUpdateRecent').prop('checked', true);\n                    $.etsyAPIHelper.getRecentListings();\n                } else if ($.etsyApp.settings.updateOnStartType == 'all') {\n                    $('#startUpdateAll').prop('checked', true);\n                    $.etsyAPIHelper.getAllListings();\n                }\n                $('#chkEnableStartUpdate').prop('checked', true);\n                $('.start-update').prop('disabled', false);\n            }\n\n            $('#autoUpdateInterval').val($.etsyApp.settings.autoUpdateInterval);\n            if ($.etsyApp.settings.autoUpdateEnabled) {\n                $('#chkEnableAutoUpdate').prop('checked', true);\n                if ($.etsyApp.settings.autoUpdateType == 'recent') {\n                    $('#autoUpdateRecent').prop('checked', true);\n                } else {\n                    $('#autoUpdateAll').prop('checked', true);\n                }\n                $('.auto-update').prop('disabled', false);\n            }\n\n            //$.etsyDB.delete();\n            //$.etsyDB.listTables();\n\n            // https://github.com/rndme/download // Use this for downloading the export\n            // https://stackoverflow.com/a/26298948/866332 // Use this to open it\n            //$.etsyDB.export().then(function (dbObj) {\n            //    var json = JSON.stringify(dbObj);\n            //    alert (json);\n            //});\n        }\n    };\n\n    $('#autoUpdateInterval').attr('min', $.etsyApp.settings.autoUpdateMinInterval);\n\n    $.etsyApp.loadSettings();\n    $.etsyDB.init();\n\n    // TODO: Is this actually broken, or breaking things? It doesn't allow me to reset the settings\n    $(window).unload(function() {\n        $.etsyApp.saveSettings();\n    });\n\n    $.db.on('ready', function () {\n        $.etsyApp.appStart();\n    });\n});"],"sourceRoot":"/source/"}