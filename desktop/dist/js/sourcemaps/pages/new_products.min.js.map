{"version":3,"sources":["pages/new_products.js"],"names":["$","document","ready","display","page","newproducts","load","toggleLoadingScreen","etsyDB","products","getNew","drawProducts","new_products","appendString","each","key","product_data","product","newProductTemplate","removeClass","product_url","find","attr","listing_id","title","html","bin_id","bin_name","price","moment","created","format","original_creation","all_product_actions","new-product-id","id","toString","new-product-title","new-product-bin-id","newProductTableBody","getElementById","innerHTML","drawBinList","bins","currentBin","val","name","total","newProductBinList","updateProductBin","product_id","fadeOut","this","remove","removeProduct","clone","on","addClass","getAll","openModal","setBin","closeModal"],"mappings":"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","file":"pages/new_products.min.js","sourcesContent":["$(document).ready(function() {\n    $.display.page.newproducts = {\n        load: function() {\n            $.display.toggleLoadingScreen($.etsyDB.products.getNew($.display.page.newproducts.drawProducts));\n        },\n\n        // Draw products table\n        drawProducts: function(new_products) {\n            var appendString = '';\n\n            $.each(new_products, function(key, product_data) {\n                var product = newProductTemplate;\n                product.removeClass('template');\n\n                var product_url = product.find('.listing-url');\n                product_url.attr('href', 'http://www.etsy.com/listing/' + product_data.listing_id);\n                product_url.attr('title', product_data.title);\n                product_url.html(product_data.title);\n\n                if (product_data.bin_id == -1) {\n                    product.find('.bin-id').html('-1');\n                    product.find('.bin-name').html('<i class=\"mdi-content-clear\"></i>');\n                }\n                else {\n                    product.find('.bin-id').html(product_data.bin_id);\n                    product.find('.bin-name').html(product_data.bin_name);\n                }\n\n                product.find('.price').html(product_data.price);\n                product.find('.created').html(moment(product_data.created).format('MMM D, h:mm a'));\n                product.find('.original-created').html(moment(product_data.original_creation).format('MMM D, h:mm a'));\n\n                var all_product_actions = product.find('.new-product-actions');\n                all_product_actions.find('.btn-floating').attr({\n                    \"new-product-id\": product_data.id.toString(),\n                    \"new-product-title\": product_data.title,\n                    \"new-product-bin-id\": product_data.bin_id\n                });\n\n                appendString += ('<tr id=\"new-product-row-' + product_data.id + '\">' + product.html() + '</tr>');\n            });\n\n            // Try and cut some repaint time by using vanilla JS\n            var newProductTableBody = document.getElementById('newProductTableBody');\n            newProductTableBody.innerHTML = appendString;\n        },\n\n        // Draw product bin list\n        drawBinList: function(bins) {\n            var appendString = '';\n            var currentBin = $('#newProductsBinID').html();\n            $.each(bins, function(key, val) {\n                if (currentBin == val.id) {\n                    appendString += '<a href=\"#!\" class=\"collection-item new-product-bin-list-item active\" new-product-bin-id=\"' + val.id + '\">';\n                } else {\n                    appendString += '<a href=\"#!\" class=\"collection-item new-product-bin-list-item\" new-product-bin-id=\"' + val.id + '\">';\n                }\n                appendString += val.name + ' (' + val.total + ' Products)</a>';\n            });\n\n            // Try and cut some repaint time by using vanilla JS\n            var newProductBinList = document.getElementById('newProductBinList');\n            newProductBinList.innerHTML = appendString;\n        },\n\n        // Remove product after assigning bin\n        updateProductBin: function(product_id, bin_id, bin_name) {\n            $('#new-product-row-' + product_id).fadeOut('slow', function() {\n                $(this).remove();\n            });\n        },\n\n        // Remove product row\n        removeProduct: function(product_id) {\n            $('#new-product-row-' + product_id).fadeOut('slow', function() {\n                $(this).remove();\n            });\n        },\n    };\n\n    var newProductTemplate = $('#newProductTemplate').clone();\n    $('#newProductTemplate').remove();\n\n    var newProductBinTemplate = $('#newProductBinTemplate');\n    $('#newProductBinTemplate').remove();\n\n    // Mark product as sold\n    $('body').on('click', '.btn-new-product-sold', function() {\n        // TODO: Open the dialog here\n    });\n\n    // Mark product bin list item active\n    $('body').on('click', '.new-product-bin-list-item', function() {\n        $('.new-product-bin-list-item').removeClass('active');\n        $(this).addClass('active');\n    });\n\n    // Reload products\n    $('#reloadNewProducts').on('click', function() {\n        $.display.page.newproducts.load();\n    });\n\n    // Open product bin list modal\n    $('body').on('click', '.btn-new-product-change-bin', function() {\n        $('#newProductBinList').attr('new-product-id', $(this).attr('new-product-id'));\n        $('#newProductBinTitle').html($(this).attr('new-product-title'));\n\n        var bin_id = $('#new-product-row-' + $(this).attr('new-product-id')).find('.bin-id').html();\n        $('#newProductsBinID').html(bin_id);\n\n        if (bin_id == -1) $('#newProductBinName').html('None');\n        else {\n            var bin_name = $('#new-product-row-' + $(this).attr('new-product-id')).find('.bin-name').html();\n            $('#newProductBinName').html(bin_name);\n        }\n\n        $.etsyDB.bins.getAll($.display.page.newproducts.drawBinList);\n        $('#modalNewProductBin').openModal();\n    });\n\n    // Update product bin display\n    $('#updateNewProductBin').on('click', function() {\n        var product_id = $('#newProductBinList').attr('new-product-id'),\n            bin_id =  $('#newProductBinList .active').attr('new-product-bin-id');\n        $.etsyDB.products.setBin(product_id, bin_id, $.display.page.newproducts.updateProductBin);\n        $('#modalNewProductBin').closeModal();\n    });\n});"],"sourceRoot":"/source/"}