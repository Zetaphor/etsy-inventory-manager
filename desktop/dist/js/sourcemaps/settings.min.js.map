{"version":3,"sources":["settings.js"],"names":["$","document","ready","openFile","file","extension","name","match","display","toastError","import_data","val","hasClass","addClass","removeClass","reader","FileReader","onload","event","target","result","readAsText","etsyApp","settings","shopName","on","saveSettings","closeModal","toastSuccess","openModal","change","this","is","prop","autoUpdateEnabled","autoUpdateInterval","autoUpdateMinInterval","setAutoUpdateTimer","removeAutoUpdateTimer","updateOnStartEnabled","autoUpdateType","updateOnStartType","etsyDB","then","dbObj","json","JSON","stringify","download","console","log","files"],"mappings":"AAAAA,EAAEC,UAAUC,MAAM,WAGd,QAASC,GAASC,GACd,GAAIC,GAAYD,EAAKE,KAAKC,MAAM,gBAEhC,IAAqB,UAAjBF,EAAU,GAKV,MAJAL,GAAEQ,QAAQC,WAAW,iDACrBC,EAAc,GACdV,EAAE,eAAeW,IAAI,SAChBX,EAAE,aAAaY,SAAS,aAAaZ,EAAE,cAAca,SAAS,YAIvEb,GAAE,cAAcc,YAAY,WAE5B,IAAIC,GAAS,GAAIC,WAEjBD,GAAOE,OAAS,SAASC,GACrBR,EAAcQ,EAAMC,OAAOC,QAG/BL,EAAOM,WAAWjB,GArBtB,GAAIM,GAAc,EAwBlBV,GAAE,cAAcW,IAAIX,EAAEsB,QAAQC,SAASC,UAEvCxB,EAAE,oBAAoByB,GAAG,QAAS,WAC9BzB,EAAEsB,QAAQC,SAASC,SAAWxB,EAAE,cAAcW,MAC9CX,EAAEsB,QAAQI,eACV1B,EAAE,kBAAkB2B,aACpB3B,EAAEQ,QAAQoB,aAAa,iCAG3B5B,EAAE,sBAAsByB,GAAG,QAAS,WAChCzB,EAAE,wBAAwB6B,cAG9B7B,EAAE,wBAAwB8B,OAAO,WAC1B9B,EAAE+B,MAAMC,GAAG,aACVhC,EAAE,gBAAgBiC,KAAK,YAAY,GACnCjC,EAAEsB,QAAQC,SAASW,mBAAoB,EACnClC,EAAEsB,QAAQC,SAASY,oBAAsBnC,EAAEsB,QAAQC,SAASa,sBAC5DpC,EAAEsB,QAAQe,sBAEVrC,EAAEQ,QAAQC,WAAW,yCAA2CT,EAAEsB,QAAQC,SAASa,sBAAuB,aAC1GpC,EAAEsB,QAAQgB,2BAGdtC,EAAE,gBAAgBiC,KAAK,YAAY,GACnCjC,EAAEsB,QAAQC,SAASW,mBAAoB,EACvClC,EAAEsB,QAAQgB,2BAIlBtC,EAAE,yBAAyB8B,OAAO,WAC3B9B,EAAE+B,MAAMC,GAAG,aACVhC,EAAE,iBAAiBiC,KAAK,YAAY,GACpCjC,EAAEsB,QAAQC,SAASgB,sBAAuB,IAE1CvC,EAAE,iBAAiBiC,KAAK,YAAY,GACpCjC,EAAEsB,QAAQC,SAASgB,sBAAuB,KAIlDvC,EAAE,uBAAuB8B,OAAO,WAC5B9B,EAAEsB,QAAQC,SAASY,mBAAqBnC,EAAE+B,MAAMpB,MAC5CX,EAAE+B,MAAMpB,OAASX,EAAEsB,QAAQC,SAASa,uBACpCpC,EAAEsB,QAAQC,SAASY,mBAAqBnC,EAAE+B,MAAMpB,MAC5CX,EAAEsB,QAAQC,SAASW,mBAAmBlC,EAAEsB,QAAQe,uBAEpDrC,EAAEQ,QAAQC,WAAW,yCAA2CT,EAAEsB,QAAQC,SAASa,sBAAuB,aAC1GpC,EAAEsB,QAAQgB,2BAIlBtC,EAAE,oCAAoC8B,OAAO,WACzC9B,EAAEsB,QAAQC,SAASiB,eAAiBxC,EAAE+B,MAAMpB,MACxCX,EAAEsB,QAAQC,SAASW,mBAAmBlC,EAAEsB,QAAQe,uBAGxDrC,EAAE,qCAAqC8B,OAAO,WAC1C9B,EAAEsB,QAAQC,SAASkB,kBAAoBzC,EAAE+B,MAAMpB,QAGnDX,EAAE,kBAAkByB,GAAG,QAAS,WAC5BzB,EAAE0C,OAAF1C,YAAkB2C,KAAK,SAAUC,GAC7B,GAAIC,GAAOC,KAAKC,UAAUH,EAC1BI,UAASH,EAAM,2BAA4B,wBAInD7C,EAAE,cAAcyB,GAAG,QAAS,WAExBwB,QAAQC,IAAIxC,KAGhBV,EAAE,eAAe8B,OAAO,WACpB3B,EAAS4B,KAAKoB,MAAM","file":"settings.min.js","sourcesContent":["$(document).ready(function() {\n    var import_data = '';\n\n    function openFile(file) {\n        var extension = file.name.match(/\\.[0-9a-z]+$/i);\n\n        if (extension[0] !== '.json') {\n            $.display.toastError(\"Import file must be a '.json' file extension!\");\n            import_data = '';\n            $('#importPath').val('');\n            if (!$('btnImport').hasClass('disabled')) $('#btnImport').addClass('disabled');\n            return;\n        }\n\n        $('#btnImport').removeClass('disabled');\n\n        var reader = new FileReader();\n\n        reader.onload = function(event) {\n            import_data = event.target.result;\n        };\n\n        reader.readAsText(file);\n    }\n\n    $('#shop_name').val($.etsyApp.settings.shopName);\n\n    $('#btnSaveSettings').on('click', function() {\n        $.etsyApp.settings.shopName = $('#shop_name').val();\n        $.etsyApp.saveSettings();\n        $('#modalSettings').closeModal();\n        $.display.toastSuccess('Settings saved successfully');\n    });\n\n    $('#btnDeleteDatabase').on('click', function() {\n        $('#modalDeleteDatabase').openModal();\n    });\n\n    $('#chkEnableAutoUpdate').change(function() {\n        if($(this).is(\":checked\")) {\n            $('.auto-update').prop('disabled', false);\n            $.etsyApp.settings.autoUpdateEnabled = true;\n            if ($.etsyApp.settings.autoUpdateInterval >= $.etsyApp.settings.autoUpdateMinInterval) {\n                $.etsyApp.setAutoUpdateTimer();\n            } else {\n                $.display.toastError('Auto-update interval must be at least ' + $.etsyApp.settings.autoUpdateMinInterval +' minutes!');\n                $.etsyApp.removeAutoUpdateTimer();\n            }\n        } else {\n            $('.auto-update').prop('disabled', true);\n            $.etsyApp.settings.autoUpdateEnabled = false;\n            $.etsyApp.removeAutoUpdateTimer();\n        }\n    });\n\n    $('#chkEnableStartUpdate').change(function() {\n        if($(this).is(\":checked\")) {\n            $('.start-update').prop('disabled', false);\n            $.etsyApp.settings.updateOnStartEnabled = true;\n        } else {\n            $('.start-update').prop('disabled', true);\n            $.etsyApp.settings.updateOnStartEnabled = false;\n        }\n    });\n\n    $('#autoUpdateInterval').change(function() {\n        $.etsyApp.settings.autoUpdateInterval = $(this).val();\n        if ($(this).val() >= $.etsyApp.settings.autoUpdateMinInterval) {\n            $.etsyApp.settings.autoUpdateInterval = $(this).val();\n            if ($.etsyApp.settings.autoUpdateEnabled) $.etsyApp.setAutoUpdateTimer();\n        } else {\n            $.display.toastError('Auto-update interval must be at least ' + $.etsyApp.settings.autoUpdateMinInterval +' minutes!');\n            $.etsyApp.removeAutoUpdateTimer();\n        }\n    });\n\n    $(\"input[name=autoUpdateType]:radio\").change(function () {\n        $.etsyApp.settings.autoUpdateType = $(this).val();\n        if ($.etsyApp.settings.autoUpdateEnabled) $.etsyApp.setAutoUpdateTimer();\n    });\n\n    $(\"input[name=startUpdateType]:radio\").change(function () {\n        $.etsyApp.settings.updateOnStartType = $(this).val();\n    });\n\n    $('#btnExportData').on('click', function() {\n        $.etsyDB.export().then(function (dbObj) {\n            var json = JSON.stringify(dbObj);\n            download(json, \"Etsy_Inventory_Data.json\", \"application/json\");\n        });\n    });\n\n    $('#btnImport').on('click', function() {\n        // TODO: Actually import the data\n        console.log(import_data);\n    });\n\n    $(\"#importFile\").change(function() {\n        openFile(this.files[0]);\n    });\n});"],"sourceRoot":"/source/"}