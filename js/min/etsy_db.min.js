$(document).ready(function(){$.etsyDB={},$.etsyDB.init=function(){Dexie.getDatabaseNames(function(t){-1==t.indexOf("etsyDB")?$.createDB():$.db.open()})},$.etsyDB.create=function(){$.db.version(1).stores({products:"++id, bin_id, listing_id, title, categories, price, created, original_created",bins:"++id, name, notes"}),console.log("Created database"),$.db.open()},$.etsyDB.addListing=function(t){$.db.table("products").where("listing_id").equals(t.listing_id).count(function(e){0===e&&$.db.table("products").add({bin_id:-1,listing_id:t.listing_id,title:t.title,categories:t.category_path.toString(),price:t.price,created:t.creation_tsz,original_creation:t.original_creation_tsz}).then(function(){console.log("Added listing #"+t.listing_id)})})},$.etsyDB.listTables=function(){$.db.tables.forEach(function(t,e){console.log("Table "+e+": "+t.name)})},$.etsyDB.deleteDB=function(){$.db["delete"]().then(function(){console.log("Deleted database")})},$.etsyDB["export"]=function(){return $.db.transaction("r",$.db.tables,function(){function t(){var i=e.shift();return i.toArray().then(function(o){return n.push({tableName:i.name,contents:o}),e.length>0?t():n})}var e=$.db.tables.map(function(t){return Dexie.currentTransaction.tables[t.name]}),n=[];return t()})}});
//# sourceMappingURL=_sourcemaps/etsy_db.min.js.map