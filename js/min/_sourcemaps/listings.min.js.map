{"version":3,"sources":["listings.js"],"names":["$","document","ready","etsy","refreshRecentListings","listings","each","results","index","listing","etsyDB","addListing","display","updateCounts","updateLastUpdateText","Materialize","toast","refreshAllListings","pagination","next_offset","getListings","updateAllListings","resultLimit","getNewProducts","callback","db","table","where","equals","toArray","then","data","getAllProducts","getBins"],"mappings":"AAAAA,EAAEC,UAAUC,MAAM,WACdF,EAAEG,KAAKC,sBAAwB,SAASC,GACpCL,EAAEM,KAAKD,EAASE,QAAS,SAASC,EAAOC,GACrCT,EAAEU,OAAOC,WAAWF,KAGxBT,EAAEY,QAAQC,eACVb,EAAEY,QAAQE,uBACVC,YAAYC,MAAM,uCAAwC,MAG9DhB,EAAEG,KAAKc,mBAAqB,SAASZ,GACjCL,EAAEM,KAAKD,EAASE,QAAS,SAASC,EAAOC,GACrCT,EAAEU,OAAOC,WAAWF,KAGgB,OAApCJ,EAASa,WAAWC,YACpBnB,EAAEG,KAAKiB,YAAYpB,EAAEG,KAAKkB,kBAAmBhB,EAASa,WAAWC,YAAanB,EAAEG,KAAKmB,cAGrFtB,EAAEY,QAAQC,eACVb,EAAEY,QAAQE,uBACVC,YAAYC,MAAM,mCAAoC,OAI9DhB,EAAEG,KAAKoB,eAAiB,SAASC,GAC7BxB,EAAEyB,GAAGC,MAAM,YAAYC,MAAM,UAAUC,OAAO,IAAIC,UAAUC,KAAK,SAASC,GACtEP,EAASO,MAIjB/B,EAAEG,KAAK6B,eAAiB,SAASR,GAC7BxB,EAAEyB,GAAGC,MAAM,YAAYG,UAAUC,KAAK,SAASC,GAC3CP,EAASO,MAIjB/B,EAAEG,KAAK8B,QAAU,SAAST,GACtBxB,EAAEyB,GAAGC,MAAM,QAAQG,UAAUC,KAAK,SAASC,GACvCP,EAASO","file":"listings.min.js","sourcesContent":["$(document).ready(function() {\n    $.etsy.refreshRecentListings = function(listings) {\n        $.each(listings.results, function(index, listing) {\n            $.etsyDB.addListing(listing);\n        });\n        //console.log('Updated recent listings');\n        $.display.updateCounts();\n        $.display.updateLastUpdateText();\n        Materialize.toast('Successfully updated recent listings', 4000);\n    };\n\n    $.etsy.refreshAllListings = function(listings) {\n        $.each(listings.results, function(index, listing) {\n            $.etsyDB.addListing(listing);\n        });\n\n        if (listings.pagination.next_offset !== null) {\n            $.etsy.getListings($.etsy.updateAllListings, listings.pagination.next_offset, $.etsy.resultLimit);\n        } else {\n            //console.log('Updated all listings');\n            $.display.updateCounts();\n            $.display.updateLastUpdateText();\n            Materialize.toast('Succesfully updated all listings', 4000);\n        }\n    };\n\n    $.etsy.getNewProducts = function(callback) {\n        $.db.table('products').where(\"bin_id\").equals(-1).toArray().then(function(data) {\n            callback(data);\n        });\n    };\n\n    $.etsy.getAllProducts = function(callback) {\n        $.db.table('products').toArray().then(function(data) {\n            callback(data);\n        });\n    };\n\n    $.etsy.getBins = function(callback) {\n        $.db.table('bins').toArray().then(function(data) {\n            callback(data);\n        });\n    };\n});"],"sourceRoot":"/source/"}