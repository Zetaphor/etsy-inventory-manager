{"version":3,"sources":["pages/bins.js"],"names":["$","document","ready","display","page","bins","load","toggleLoadingScreen","etsyDB","getAll","drawBins","append","appendString","each","key","val","bin","binTemplate","removeClass","find","html","id","name","total","notes","bin_actions","attr","bin-id","toString","bin-name","bin-total","binsTableBody","getElementById","innerHTML","removeBin","bin_id","fadeOut","this","remove","clone","on","bin_name","bin_notes","Materialize","toast","closeModal","add","console","log","getQRCode","openModal","parseInt","labelSizes","image","font","labelImageSize","labelFontSize","printWindow","window","open","windowContent","body","title","css","position","left","transform","width","textAlign","top","fontSize","fontWeight","wordWrap","print"],"mappings":"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","file":"pages/bins.min.js","sourcesContent":["$(document).ready(function() {\n    $.display.page.bins = {\n        load: function() {\n            $.display.toggleLoadingScreen($.etsyDB.bins.getAll($.display.page.bins.drawBins));\n        },\n\n        drawBins: function(bins, append) {\n            append = typeof append !== 'undefined' ? append : false;\n            var appendString = '';\n            $.each(bins, function(key, val) {\n                var bin = binTemplate;\n                bin.removeClass('template');\n                bin.find('.bin-id').html(val.id);\n                bin.find('.bin-name').html(val.name);\n                bin.find('.bin-total').html(val.total);\n                bin.find('.bin-notes').html(val.notes);\n\n                var bin_actions = bin.find('.bin-actions');\n                bin_actions.find('.btn-floating').attr({\n                    \"bin-id\": val.id.toString(),\n                    \"bin-name\": val.name,\n                    \"bin-total\": val.total\n                });\n\n                appendString += ('<tr id=\"bin-row-' + val.id.toString() + '\">' + bin.html() + '</tr>');\n            });\n\n            if (append) {\n                $('#binsTableBody').append(appendString);\n            } else {\n                // Try and cut some repaint time by using vanilla JS\n                var binsTableBody = document.getElementById('binsTableBody');\n                binsTableBody.innerHTML = appendString;\n            }\n        },\n\n        removeBin: function(bin_id) {\n            $('#bin-row-' + bin_id).fadeOut('slow', function() {\n                $(this).remove();\n            });\n        }\n    };\n\n    var binTemplate = $('#binTemplate').clone();\n    $('#binTemplate').remove();\n\n    $('#reloadBins').on('click', function() {\n        $.display.page.bins.load();\n    });\n\n    $('#createBin').on('click', function() {\n        var bin_name = $('#bin_name').val();\n        var bin_notes = $('#bin_notes').val();\n\n        if (bin_name === '') Materialize.toast('Please enter a bin name', 4000);\n        else {\n            $('#modalCreateBin').closeModal();\n            $.etsyDB.bins.add(bin_name, bin_notes, $.display.page.bins.drawBins);\n            $('#bin_name').val('');\n            $('#bin_notes').val('');\n        }\n    });\n\n    $('body').on('click', '.btn-edit-bin', function() {\n        console.log($(this).attr('bin-id'));\n        console.log($(this).attr('bin-name'));\n    });\n\n    $('body').on('click', '.btn-print-bin', function() {\n        $('#previewTitle').html($(this).attr('bin-name'));\n        $('#previewImage').attr('src', $.display.getQRCode('Bin-ID:' + $(this).attr('bin-id'), 250));\n\n        $('#modalPrintBinLabel').openModal();\n    });\n\n    $('body').on('click', '.btn-remove-bin', function() {\n        $('.binDeleteName').html($(this).attr('bin-name'));\n        $('#binDeleteID').html($(this).attr('bin-id'));\n        $('.binDeleteTotal').html($(this).attr('bin-total'));\n        $('#modalDeleteBin').openModal();\n    });\n\n    $('#confirmDeleteBin').on('click', function() {\n        $('#modalDeleteBin').closeModal();\n        $.etsyDB.bins.delete(parseInt($('#binDeleteID').html()), $('.binDeleteName').html(), $.display.page.bins.removeBin);\n    });\n\n    $('input[type=radio][name=label-size]').on('change', function() {\n        $('#labelImageSize').val($.display.labelSizes[$(this).attr('id')].image);\n        $('#labelFontSize').val($.display.labelSizes[$(this).attr('id')].font);\n    });\n\n    $('#printBin').on('click', function() {\n        $('#modalPrintBinLabel').closeModal();\n        var labelImageSize = $('#labelImageSize').val(),\n            labelFontSize = $('#labelFontSize').val(),\n            printWindow = window.open('', \"Test Window\", \"height=600,width=800\"),\n            windowContent = printWindow.document.body;\n        windowContent.title = 'Test';\n        $(windowContent).html($('#printPreview').html());\n        $(windowContent).find('#previewImage').attr('src', $.display.getQRCode('Bin-ID:' + $(this).attr('bin-id'), labelImageSize));\n\n        $(windowContent).find('#previewImage').css({\n            position: 'relative',\n            left: '50%',\n            transform: 'translateX(-50%)',\n            width: labelImageSize + 'px'\n        });\n        $(windowContent).find('#previewTitle').css({\n            position: 'relative',\n            left: '50%',\n            transform: 'translateX(-50%)',\n            width: labelImageSize + 'px',\n            textAlign: 'center',\n            top: '-1em',\n            fontSize: labelFontSize + 'px',\n            fontWeight: 'bold',\n            wordWrap: 'break-word'\n        });\n        printWindow.print();\n    });\n});"],"sourceRoot":"/source/"}