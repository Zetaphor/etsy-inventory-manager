{"version":3,"sources":["pages/products.js"],"names":["$","document","ready","display","page","products","load","toggleLoadingScreen","etsyDB","getAll","drawProducts","appendString","each","key","val","product","allProductTemplate","removeClass","product_url","find","attr","listing_id","title","html","bin_id","price","moment","created","format","original_creation","all_product_actions","all-product-id","id","toString","all-product-title","all-product-bin-id","productTableBody","getElementById","innerHTML","drawBinList","bins","name","total","allProductBinList","updateProductBin","product_id","bin_name","clone","remove","on","this","addClass","openModal","parseInt","setBin","closeModal"],"mappings":"AAAAA,EAAEC,UAAUC,MAAM,WACdF,EAAEG,QAAQC,KAAKC,UACXC,KAAM,WACFN,EAAEG,QAAQI,oBAAoBP,EAAEQ,OAAOH,SAASI,OAAOT,EAAEG,QAAQC,KAAKC,SAASK,gBAGnFA,aAAc,SAASL,GACnB,GAAIM,GAAe,EAEnBX,GAAEY,KAAKP,EAAU,SAASQ,EAAKC,GAC3B,GAAIC,GAAUC,CACdD,GAAQE,YAAY,WAEpB,IAAIC,GAAcH,EAAQI,KAAK,eAC/BD,GAAYE,KAAK,OAAQ,+BAAiCN,EAAIO,YAC9DH,EAAYE,KAAK,QAASN,EAAIQ,OAC9BJ,EAAYK,KAAKT,EAAIQ,OAEH,IAAdR,EAAIU,SACJT,EAAQI,KAAK,WAAWI,KAAK,MAC7BR,EAAQI,KAAK,aAAaI,KAAK,sCASnCR,EAAQI,KAAK,UAAUI,KAAKT,EAAIW,OAChCV,EAAQI,KAAK,YAAYI,KAAKG,OAAOZ,EAAIa,SAASC,OAAO,kBACzDb,EAAQI,KAAK,qBAAqBI,KAAKG,OAAOZ,EAAIe,mBAAmBD,OAAO,iBAE5E,IAAIE,GAAsBf,EAAQI,KAAK,uBACvCW,GAAoBX,KAAK,iBAAiBC,MACtCW,iBAAkBjB,EAAIkB,GAAGC,WACzBC,oBAAqBpB,EAAIQ,MACzBa,qBAAsBrB,EAAIU,SAG9Bb,GAAiB,2BAA6BG,EAAIkB,GAAK,KAAOjB,EAAQQ,OAAS,SAInF,IAAIa,GAAmBnC,SAASoC,eAAe,mBAC/CD,GAAiBE,UAAY3B,GAGjC4B,YAAa,SAASC,GAClB,GAAI7B,GAAe,EACnBX,GAAEY,KAAK4B,EAAM,SAAS3B,EAAKC,GAMvBH,GAAgB,sFAAwFG,EAAIkB,GAAK,KACjHrB,GAAgBG,EAAI2B,KAAO,KAAO3B,EAAI4B,MAAQ,kBAMlD,IAAIC,GAAoB1C,SAASoC,eAAe,oBAChDM,GAAkBL,UAAY3B,GAGlCiC,iBAAkB,SAASC,EAAYrB,EAAQsB,GAC3C9C,EAAE,oBAAsB6C,GAAY1B,KAAK,aAAaI,KAAKuB,IAOnE,IAAI9B,GAAqBhB,EAAE,uBAAuB+C,OAClD/C,GAAE,uBAAuBgD,QAEGhD,GAAE,yBAC9BA,GAAE,0BAA0BgD,SAG5BhD,EAAE,QAAQiD,GAAG,QAAS,6BAA8B,WAChDjD,EAAE,8BAA8BiB,YAAY,UAC5CjB,EAAEkD,MAAMC,SAAS,YAGrBnD,EAAE,mBAAmBiD,GAAG,QAAS,WAC7BjD,EAAEG,QAAQC,KAAKC,SAASC,SAG5BN,EAAE,QAAQiD,GAAG,QAAS,8BAA+B,WACjDjD,EAAE,sBAAsBoB,KAAK,iBAAkBpB,EAAEkD,MAAM9B,KAAK,mBAC5DpB,EAAE,uBAAuBuB,KAAKvB,EAAEkD,MAAM9B,KAAK,mBAC3CpB,EAAEQ,OAAOgC,KAAK/B,OAAOT,EAAEG,QAAQC,KAAKC,SAASkC,aAC7CvC,EAAE,uBAAuBoD,cAG7BpD,EAAE,wBAAwBiD,GAAG,QAAS,WAClC,GAAIJ,GAAaQ,SAASrD,EAAE,sBAAsBoB,KAAK,mBACnDI,EAAU6B,SAASrD,EAAE,8BAA8BoB,KAAK,sBAC5DpB,GAAEQ,OAAOH,SAASiD,OAAOT,EAAYrB,EAAQxB,EAAEG,QAAQC,KAAKC,SAASuC,kBACrE5C,EAAE,uBAAuBuD","file":"pages/products.min.js","sourcesContent":["$(document).ready(function() {\n    $.display.page.products = {\n        load: function() {\n            $.display.toggleLoadingScreen($.etsyDB.products.getAll($.display.page.products.drawProducts));\n        },\n\n        drawProducts: function(products) {\n            var appendString = '';\n\n            $.each(products, function(key, val) {\n                var product = allProductTemplate;\n                product.removeClass('template');\n\n                var product_url = product.find('.listing-url');\n                product_url.attr('href', 'http://www.etsy.com/listing/' + val.listing_id);\n                product_url.attr('title', val.title);\n                product_url.html(val.title);\n\n                if (val.bin_id == -1) {\n                    product.find('.bin-id').html('-1');\n                    product.find('.bin-name').html('<i class=\"mdi-content-clear\"></i>');\n                }\n                else {\n                    //console.log(val);\n                    //console.log(val.bin_name);\n                    //product.find('.bin-id').html(val.bin_id);\n                    //product.find('.bin-name').html(val.bin_name);\n                }\n\n                product.find('.price').html(val.price);\n                product.find('.created').html(moment(val.created).format('MMM D, h:mm a'));\n                product.find('.original-created').html(moment(val.original_creation).format('MMM D, h:mm a'));\n\n                var all_product_actions = product.find('.all-product-actions');\n                all_product_actions.find('.btn-floating').attr({\n                    \"all-product-id\": val.id.toString(),\n                    \"all-product-title\": val.title,\n                    \"all-product-bin-id\": val.bin_id\n                });\n\n                appendString += ('<tr id=\"all-product-row-' + val.id + '\">' + product.html() + '</tr>');\n            });\n\n            // Try and cut some repaint time by using vanilla JS\n            var productTableBody = document.getElementById('productTableBody');\n            productTableBody.innerHTML = appendString;\n        },\n\n        drawBinList: function(bins) {\n            var appendString = '';\n            $.each(bins, function(key, val) {\n                // var bin = allProductBinTemplate;\n                //bin.removeClass('template');\n                //bin.attr('bin_id', val.id);\n                //bin.html(val.name + ' - ' + val.total + ' products');\n                //console.log(bin.html());\n                appendString += '<a href=\"#!\" class=\"collection-item all-product-bin-list-item\" all-product-bin-id=\"' + val.id + '\">';\n                appendString += val.name + ' (' + val.total + ' Products)</a>';\n\n                //appendString += bin.html();\n            });\n\n            // Try and cut some repaint time by using vanilla JS\n            var allProductBinList = document.getElementById('allProductBinList');\n            allProductBinList.innerHTML = appendString;\n        },\n\n        updateProductBin: function(product_id, bin_id, bin_name) {\n            $('#all-product-row-' + product_id).find('.bin_name').html(bin_name);\n            //console.log(product_id);\n            //console.log(bin_id);\n            //console.log(bin_name);\n        }\n    };\n\n    var allProductTemplate = $('#allProductTemplate').clone();\n    $('#allProductTemplate').remove();\n\n    var allProductBinTemplate = $('#allProductBinTemplate');\n    $('#allProductBinTemplate').remove();\n\n\n    $('body').on('click', '.all-product-bin-list-item', function() {\n        $('.all-product-bin-list-item').removeClass('active');\n        $(this).addClass('active');\n    });\n\n    $('#reloadProducts').on('click', function() {\n        $.display.page.products.load();\n    });\n\n    $('body').on('click', '.btn-all-product-change-bin', function() {\n        $('#allProductBinList').attr('all-product-id', $(this).attr('all-product-id'));\n        $('#allProductBinTitle').html($(this).attr('all-product-id'));\n        $.etsyDB.bins.getAll($.display.page.products.drawBinList);\n        $('#modalAllProductBin').openModal();\n    });\n\n    $('#updateAllProductBin').on('click', function() {\n        var product_id = parseInt($('#allProductBinList').attr('all-product-id')),\n            bin_id =  parseInt($('#allProductBinList .active').attr('all-product-bin-id'));\n        $.etsyDB.products.setBin(product_id, bin_id, $.display.page.products.updateProductBin);\n        $('#modalAllProductBin').closeModal();\n    });\n});"],"sourceRoot":"/source/"}